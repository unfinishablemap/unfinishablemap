{{ define "main" }}
<h1>{{ .Title }}</h1>

{{ with .Description }}
<p>{{ . }}</p>
{{ end }}

{{ .Content }}

{{ if .Pages }}
<div class="table-controls">
    <button id="expand-all-btn" class="outline secondary">Expand All</button>
</div>
<table class="striped table-sort table-arrows">
    <thead>
        <tr>
            <th scope="col">Title</th>
            <th scope="col" class="onload-sort order-by-desc">Created</th>
            <th scope="col">Modified</th>
        </tr>
    </thead>
    <tbody>
    {{ range .Pages.ByLastmod.Reverse }}
        {{- $ai := .Params.ai_contribution | default 0 -}}
        {{- $type := cond (eq $ai 0) "human" (cond (eq $ai 100) "ai" "mixed") -}}
        <tr>
            <td>
                <div class="title-row">
                    <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                    <span class="authorship-badge authorship-{{ $type }}">
                        {{ if eq $type "ai" }}ğŸ¤–{{ else if eq $type "human" }}ğŸ‘¤{{ else }}ğŸ¤{{ end }}
                    </span>
                </div>
                <div class="summary-text">{{ .Summary | plainify | truncate 1000 }}</div>
            </td>
            <td>{{ with .Params.created }}{{ . }}{{ end }}</td>
            <td>{{ .Lastmod.Format "2006-01-02" }}</td>
        </tr>
    {{ end }}
    </tbody>
</table>
{{ end }}
{{ end }}
