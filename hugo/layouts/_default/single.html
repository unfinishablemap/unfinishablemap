{{ define "main" }}
<article>
    <h1>{{ .Title }}</h1>

    {{- if .IsPage -}}
    {{- $pseudo := partial "ai-pseudonym.html" . -}}
    <p class="byline">
        <a href="/authors/andysouthgate/">Andy Southgate</a>
        {{- with $pseudo.name }} Â· <a href="/authors/{{ $pseudo.slug }}/">{{ . }}</a>{{ end }}
    </p>
    {{- end }}

    {{ if .Params.archived }}
        {{ partial "archive-notice.html" . }}
    {{ end }}

    {{ if .Site.Params.showAuthorship }}
        {{ partial "authorship.html" . }}
    {{ end }}

    <div class="content">
        {{ .Content }}
    </div>

    {{ with .Params.structured_data }}
        {{ if .concepts }}
        <div class="concepts">
            <strong>Related concepts:</strong>
            {{ range .concepts }}
            <a href="/concepts/{{ . | urlize }}/">{{ . }}</a>{{ if not (eq . (index $.Params.structured_data.concepts (sub (len $.Params.structured_data.concepts) 1))) }}, {{ end }}
            {{ end }}
        </div>
        {{ end }}
    {{ end }}
</article>
{{ end }}
